<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Hidrata e Corre üê≠üíß</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #e3f2fd;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      background-color: #42a5f5;
      color: white;
      padding: 10px 20px;
      width: 100%;
      text-align: center;
    }

    .status {
      margin: 10px 0;
      display: flex;
      gap: 15px;
      justify-content: center;
    }

    .status span {
      font-weight: bold;
    }

    #controls {
      margin: 15px;
      text-align: center;
    }

    input {
      padding: 5px;
      width: 60px;
      margin: 0 5px;
    }

    #gameArea {
      background: white;
      border: 2px solid #ccc;
      width: 600px;
      height: 200px;
      position: relative;
      overflow: hidden;
    }

    #rato {
      position: absolute;
      bottom: 0;
      left: 50px;
      width: 40px;
      height: 40px;
      background: url('https://i.imgur.com/DvL2LbZ.png') no-repeat center / cover;
    }

    #obstacle {
      position: absolute;
      bottom: 0;
      right: -40px;
      width: 40px;
      height: 40px;
      background: brown;
    }

    .jump {
      animation: jump 0.6s ease;
    }

    @keyframes jump {
      0% { bottom: 0; }
      50% { bottom: 100px; }
      100% { bottom: 0; }
    }
  </style>
</head>
<body>

<header>
  <h1>Hidrata e Corre üê≠</h1>
</header>

<div class="status">
  <span id="litrosTotal">Litros hoje: 0 L</span>
  <span id="vidas">Vidas: 0</span>
  <span id="pontos">Pontos: 0</span>
</div>

<div id="controls">
  <label>Copos desejados: <input type="number" id="coposDesejados" value="8"></label>
  <label>ML por copo: <input type="number" id="mlPorCopo" value="250"></label>
  <button onclick="beberAgua()">Beber √Ågua</button>
</div>

<div id="gameArea">
  <div id="rato"></div>
  <div id="obstacle"></div>
</div>

<script>
  let vidas = 0;
  let pontos = 0;
  let litrosHoje = 0;
  let coposBebidos = 0;
  const rato = document.getElementById("rato");
  const obstaculo = document.getElementById("obstacle");

  const todayKey = new Date().toISOString().split('T')[0]; // YYYY-MM-DD

  // Carregar dados salvos
  const dadosHidratacao = JSON.parse(localStorage.getItem('hydrationData')) || {};
  const dadosJogo = JSON.parse(localStorage.getItem('gameData')) || {};

  litrosHoje = dadosHidratacao[todayKey]?.litros || 0;
  pontos = dadosJogo[todayKey]?.pontos || 0;
  vidas = Math.floor(litrosHoje * 1000 / parseInt(document.getElementById("mlPorCopo").value));

  updateStatus();

  function beberAgua() {
    const ml = parseInt(document.getElementById("mlPorCopo").value) || 250;
    litrosHoje += ml / 1000;
    vidas++;

    // Atualiza o armazenamento
    dadosHidratacao[todayKey] = {
      litros: litrosHoje,
      copos: (dadosHidratacao[todayKey]?.copos || 0) + 1
    };
    localStorage.setItem('hydrationData', JSON.stringify(dadosHidratacao));

    updateStatus();
  }

  function updateStatus() {
    document.getElementById("litrosTotal").innerText = `Litros hoje: ${litrosHoje.toFixed(2)} L`;
    document.getElementById("vidas").innerText = `Vidas: ${vidas}`;
    document.getElementById("pontos").innerText = `Pontos: ${pontos}`;
  }

  function pular() {
    if (!rato.classList.contains("jump")) {
      rato.classList.add("jump");
      setTimeout(() => rato.classList.remove("jump"), 600);
    }
  }

  document.body.addEventListener("keydown", e => {
    if (e.code === "Space") pular();
  });

  // Movimenta√ß√£o do obst√°culo
  let obsX = 600;
  setInterval(() => {
    obsX -= 5;
    if (obsX < -40) {
      obsX = 600;
      pontos++;
      dadosJogo[todayKey] = { pontos };
      localStorage.setItem('gameData', JSON.stringify(dadosJogo));
      updateStatus();
    }

    obstaculo.style.right = `${-obsX}px`;

    // Colis√£o
    const ratoTop = parseInt(window.getComputedStyle(rato).getPropertyValue("bottom"));
    if (obsX < 90 && obsX > 40 && ratoTop < 40) {
      if (vidas > 0) {
        vidas--;
        updateStatus();
        obsX = 600;
      } else {
        alert("Game Over üò¢ Pontos: " + pontos);
        pontos = 0;
        updateStatus();
        obsX = 600;
      }
    }
  }, 30);
</script>

</body>
</html>
